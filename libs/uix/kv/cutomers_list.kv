<ListItems>:
    orientation:"horizontal"
    elevation: .8
    size_hint: (None, None)
    size: (dp(350), dp(350))
    padding: "10dp"
    spacing: "5dp"
    pos_hint: {"center_x": 0.5}
    radius: [20, 20, 20, 20]
    theme_bg_color: "Custom"
    md_bg_color: "#E1F4F1" if root.status == "Active" else "#FFECEC"#"#FFFFFF"
    style: "elevated"
    on_release:app.screen_manager.get_screen("customers_list").get_text(root.custid)
    MDRelativeLayout:
        FitImage:
            source: root.avatar_source  # Image URL from data
            # size_hint_y=None,
            # height="80dp",

            size_hint: (None, None)
            size: (dp(60), dp(60))
            radius: [self.width/2,]
            pos_hint: {"center_y": 0.5}
        MDIconButton:
            icon:"whatsapp"
            style: "standard"
            pos_hint:{"top": 1, "right": 1}
            on_release:root.whatsappmsg("91"+str(root.phone),"")
        MDLabel:
            text:root.name[:25]+".." if len(root.name)>25 else root.name
            theme_text_color:"Primary"
            halign:"left"
            adaptive_size: True
            height:"24dp"
            font_style:"Title"
            role:"medium"
            pos_hint: {"center_y": 0.7,"x": 0.25}
        
        MDLabel:
            text:"Expired On : "+ str(root.expiry_date)
            # theme_text_color:"Custom"
            # text_color: root.getcolor(root.expiry_date) if root.expdate != '' else [1,1,1,1]
            halign:"center"
            adaptive_size: True
            height:"20dp"
            font_style:"Title"
            role:"medium"
            pos_hint: {"center_y": 0.2,"x": 0.25}

   
<CustomersList>:
    name:"customers_list"
    theme_bg_color: "Custom"
    md_bg_color: app.getval("BACKGROUND_COLOR")
    MDBoxLayout:
        orientation: "vertical"
        
        # Fixed Top App Bar
        MDTopAppBar:
            theme_bg_color: "Custom"
            md_bg_color: app.getval("PRIMARY_COLOR")
            elevation: 5
            MDTopAppBarLeadingButtonContainer:
                MDActionTopAppBarButton:
                    icon: "menu"
                    on_release: app.root.children[0].set_state("open")
            MDTopAppBarTitle:
                text: " "
            MDTopAppBarTrailingButtonContainer:
                # pos_hint: {"center_x": 1, "center_y": .5}

                MDActionTopAppBarButton:
                    icon: "logout"
                    on_release: app.logout()

        MDBoxLayout:
            id: mainbox
            orientation: 'vertical'
            spacing: dp(10)
            padding: dp(20)
            theme_bg_color: "Custom"
            md_bg_color: "#F4F4F4"
            MDBoxLayout:
                id: mainbox
                orientation: 'horizontal'
                adaptive_height: True
                # spacing: dp(10)
                # padding: dp(20)
                MDButton:
                    id: back
                    style: "filled"
                    pos_hint: {"center_x": 0.5,"center_y": 0.5}
                    theme_bg_color: "Custom"
                    md_bg_color: app.getval("PRIMARY_COLOR")
                    on_release: root.parent.previous_screen()

                    MDButtonText:
                        text: "Back"
                MDLabel:
                    text: "         Customer List "
                    # pos_hint: {"x": 1}
            MDBoxLayout:
                id: filters
                adaptive_height: True
                size_hint: .88,None
                pos_hint:{"center_x": 0.5}
                theme_bg_color: "Custom"
                md_bg_color: app.getval("BACKGROUND_COLOR")

                # MDIconButton:
                #     icon: 'account-search'

                MDTextField:
                    id: search_field
                    hint_text: 'Search Customer'
                    # mode: "round"
                    on_text: root.set_list_items(self.text, True)
                    MDTextFieldLeadingIcon:
                        icon: "magnify"
                    MDTextFieldHintText:
                        text: "Search Customers"
                        # mode: "persistent"
            # MDScrollView:
            #     do_scroll_x: False

            #     MDBoxLayout:
            #         id: main_scroll
            #         orientation: "vertical"
            #         adaptive_height: True
            RecycleView:
                id: rv
                key_viewclass: 'viewclass'
                key_size: 'height'
                theme_bg_color: "Custom"
                md_bg_color: app.getval("BACKGROUND_COLOR")

                RecycleBoxLayout:
                    padding: dp(10)
                    spacing: dp(10)
                    default_size: None, dp(67)
                    default_size_hint: 1, None
                    size_hint_y: None
                    height: self.minimum_height
                    orientation: 'vertical'
                    theme_bg_color: "Custom"
                    md_bg_color: app.getval("BACKGROUND_COLOR")