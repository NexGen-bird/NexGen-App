
<CustomerProfile>:
    name:"customer_profile"
    theme_bg_color: "Custom"
    md_bg_color: app.getval("BACKGROUND_COLOR")
    MDBoxLayout:
        orientation: "vertical"
        MDTopAppBar:
            theme_bg_color: "Custom"
            md_bg_color: app.getval("PRIMARY_COLOR")
            elevation: 5
            MDTopAppBarLeadingButtonContainer:
                MDActionTopAppBarButton:
                    icon: "menu"
                    on_release: app.root.children[0].set_state("open")
            MDTopAppBarTitle:
                text: " "
            MDTopAppBarTrailingButtonContainer:
                # pos_hint: {"center_x": 1, "center_y": .5}

                MDActionTopAppBarButton:
                    icon: "logout"
                    on_release: app.logout()

        MDFloatLayout:

            # Back Arrow Icon
            # MDButton:
            MDIconButton:
                icon: "arrow-left"
                pos_hint: {"left": 1, "top": 1}
                user_font_size: "24sp"
                on_release: root.go_back(self)
            MDIconButton:
                icon: "whatsapp"
                style: "standard"
                pos_hint: {"top": 1, "right": 1}
                on_release: root.send_whatsapp_messages(root.phone,root.username,root.expiry_date)


            # Profile Card
            MDCard:
                orientation: "vertical"
                size_hint: 0.9, 0.39
                pos_hint: {"center_x": 0.5, "top": 0.9}
                padding: "20dp"
                radius: [15, 15, 15, 15]
                style:"outlined"
                theme_bg_color: "Custom"
                md_bg_color: app.getval("CARD_BACKGROUND")

                FitImage:
                    source: root.profile_image
                    size_hint: None, None
                    size: "100dp", "100dp"
                    radius: [self.width,]
                    pos_hint: {"center_x": 0.5, "center_y": 1}
                
                MDLabel:
                    text: root.username
                    font_style: "Headline"
                    role:"small"
                    halign: "center"
                    pos_hint: {"center_x": 0.5, "center_y": 0.5}

                MDLabel:
                    text: "Joined on " + root.join_date
                    font_style: "Body"
                    role:"large"
                    halign: "center"
                    pos_hint: {"center_x": 0.5, "center_y": 0.40}
                    color: "#7E8899"

                MDLabel:
                    text: "Subscription Expires on " + root.expiry_date
                    font_style: "Body"
                    role:"large"
                    halign: "center"
                    pos_hint: {"center_x": 0.5, "center_y": 0.25}
                    color: "#7E8899"

            # Transactional History Button
            MDCard:
                size_hint: 0.9, 0.1
                pos_hint: {"center_x": 0.5, "center_y": 0.39}
                orientation: "horizontal"
                padding: "10dp"
                style:"elevated"
                ripple_behavior: True
                on_release: root.navigate_transactions()
                theme_bg_color: "Custom"
                md_bg_color: app.getval("CARD_BACKGROUND")

                MDLabel:
                    text: "Transactional History"
                    font_style: "Title"
                    role:"large"
                    halign: "left"

                MDIconButton:
                    icon: "chevron-right"
                    pos_hint: {"center_y": 0.5}
                    on_release: root.navigate_transactions()
            MDCard:
                size_hint: 0.9, 0.09
                pos_hint: {"center_x": 0.5, "center_y": 0.25}
                orientation: "horizontal"
                padding: "10dp"
                style:"elevated"
                ripple_behavior: True
                on_release: root.navigate_subcriptions()
                theme_bg_color: "Custom"
                md_bg_color: app.getval("CARD_BACKGROUND")

                MDLabel:
                    text: "Subcription History"
                    font_style: "Title"
                    role:"large"
                    halign: "left"

                MDIconButton:
                    icon: "chevron-right"
                    pos_hint: {"center_y": 0.5}
                    on_release: root.navigate_subcriptions()

            # User Details Button
            MDCard:
                size_hint: 0.9, 0.09
                pos_hint: {"center_x": 0.5, "center_y": 0.11}
                orientation: "horizontal"
                padding: "10dp"
                ripple_behavior: True
                on_release: root.go_to_user_details()
                style:"elevated"
                theme_bg_color: "Custom"
                md_bg_color: app.getval("CARD_BACKGROUND")

                MDLabel:
                    text: root.username + " Details"
                    font_style: "Title"
                    role:"large"
                    halign: "left"

                MDIconButton:
                    icon: "chevron-right"
                    pos_hint: {"center_y": 0.5}
                    on_release: root.go_to_user_details()
            # ScrollView:
            #     size_hint_x: .9
            #     pos_hint: {"center_x": 0.5, "center_y": -0.05}
            #     # pos_hint: {"center_x": .5, "center_y": .5}
            #     MDList:
            #         id: container